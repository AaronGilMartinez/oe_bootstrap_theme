{#
/**
 * @file
 * File download pattern.
 */
#}
{% if translations.items is not empty and translations.items is iterable %}
  {% set _items = [] %}
  {% set num_languages = 0 %}
  {%  for _file in translations.items  %}
    {% if _file.type != 'content' %}
      {% set _file = _file|merge({
        title: _file.title,
        language: _file.language_code|to_native_language|capitalize,
        meta: '(' ~ _file.size|format_size ~ ' - ' ~ _file.extension|upper ~ ')',
        icon: {
          name: _file.extension|to_file_icon,
          size: '2xl',
        },
        download: {
          label: button_label|default('Download'|t),
          path: _file.url,
          icon: {
            name: 'download',
            size: 'fluid',
          },
        },
      }) %}
      {% set num_languages = num_languages +1  %}
      {% set _items = _items|merge([_file]) %}
    {% endif %}
  {% endfor %}
  {% set _label = {
    label: 'Other languages (@num_translations)'|t({'@num_translations': num_languages}),
    icon_position: 'after',
    icon: {
      path: bcl_icon_path,
      name: 'caret-down-fill',
      size: '2xs',
    },
  } %}
{% endif %}
{%  if file is not empty %}
  {% include '@oe-bcl/bcl-file/file.html.twig' with {
    title: file.title,
    language: file.language_code|to_native_language|capitalize,
    meta: '(' ~ file.size|format_size ~ ' - ' ~ file.extension|upper ~ ')',
    icon: {
      name: file.extension|to_file_icon,
      size: '2xl',
    },
    download: {
      label: button_label|default('Download'|t),
      path: file.url,
      icon: {
        name: 'download',
        size: 'fluid',
      },
    },
    translation: {
      label: _label,
      items: _items,
    },
    attributes: attributes,
  } only %}
{% endif %}
